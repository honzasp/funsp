\documentclass[a4paper,oneside,11pt]{report}
\usepackage[a4paper]{geometry}
\usepackage{fullpage}
\usepackage[czech]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{microtype}
\usepackage{listings}
\usepackage{lmodern}
\usepackage{marginnote}
\usepackage{syntax}
\usepackage{at}
\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}

\lstloadlanguages{Haskell}
\lstnewenvironment{code}
  {\lstset{}%
    \csname lst@SetFirstLabel\endcsname}
  {\csname lst@SaveFirstLabel\endcsname}
  \lstset{
    basicstyle=\small\ttfamily,
    flexiblecolumns=false,
    basewidth={0.5em,0.45em},
    language=Haskell,
    showstringspaces=false,
    keywords={ % use only real Haskell keywords
      case,class,data,default,deriving,do,else
      ,foreign,if,import,in,infix,infixl
      ,infixr,instance,let,module,newtype,of
      ,then,type,where
    },
    otherkeywords={_}
    }

\lstdefinestyle{krunimir}{
    basicstyle=\small\ttfamily,
    flexiblecolumns=false,
    keywords={
      forward,left,right,color,pen,split,if,repeat,define
    },
}

\DisableLigatures[>,<]{encoding = T1,family=tt*} %
\setlength{\grammarparsep}{5pt plus 1pt minus 1pt} 
\setlength{\grammarindent}{12em}

\renewcommand*{\marginfont}{\scriptsize}

\newatcommand t[1]{\texttt{#1}}

\makeindex
\newatcommand idx[1]{\index{#1@\texttt{#1}}}
\newatcommand Idx[1]{\index{#1@\texttt{#1}|textbf}}

\hypersetup{
  unicode=true,          % non-Latin characters in Acrobat’s bookmarks
  pdftitle={TITULEK !!!!!},    % title
  pdfauthor={Jan Špaček},     % author
  hidelinks=true,
  hyperindex=true,
  linktoc=all,
}

\begin{document}
@t{Žluťoučký kůň úpěl ďábelské ódy.}

\tableofcontents

\input{tex/krunimir.tex}

\printindex

\end{document}
